<!DOCTYPE html>n<html lang="en">n<head>n  <meta charset="UTF-8" />n  <meta name="viewport" content="width=device-width, initial-scale=1.0" />n  <title>Profile | AI-MCP-Bio</title>n  <link rel="stylesheet" href="style.css" />n  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />n  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />n  <style>n    body { background: radial-gradient(1200px 600px at 10% -20%, rgba(124, 58, 237, 0.25), transparent 60%),n                         radial-gradient(1000px 600px at 110% 120%, rgba(99, 102, 241, 0.18), transparent 60%), #130a33; }n    .page { max-width: 1100px; margin: 40px auto; padding: 0 16px; }n    .card { border:1px solid rgba(255,255,255,0.15); border-radius:12px; background:#2a1f5f; }n    .tabs button.active { background:#6d28d9; color:white; }n  </style>n  <script defer src="auth.js"></script>n  <script defer>n    document.addEventListener('DOMContentLoaded', () => {n      if (!window.authManager || !window.authManager.isAuthenticated()) {n        window.location.href = 'index.html#login';n        return;n      }n      // Wire tabs similar to modal versionn      const tabButtons = {n        credentials: document.getElementById('tabBtnCredentials'),n        mcp: document.getElementById('tabBtnMCP'),n        client: document.getElementById('tabBtnClient')n      };n      const tabPanels = {n        credentials: document.getElementById('tabCredentials'),n        mcp: document.getElementById('tabMCP'),n        client: document.getElementById('tabClient')n      };n      const activate = (key) => {n        Object.values(tabPanels).forEach(el => el.style.display = 'none');n        tabPanels[key].style.display = 'block';n        Object.values(tabButtons).forEach(b => b.className = 'btn btn-secondary');n        tabButtons[key].className = 'btn btn-auth';n      };n      tabButtons.credentials.onclick = () => activate('credentials');n      tabButtons.mcp.onclick = () => { activate('mcp'); window.authManager.refreshMCP(); };n      tabButtons.client.onclick = () => { activate('client'); window.authManager.refreshMcpClientConfig(); };n      // Default tab from hashn      const hash = (window.location.hash || '').replace('#','');n      if (hash === 'mcp') tabButtons.mcp.click();n      else if (hash === 'client') tabButtons.client.click();n      else tabButtons.credentials.click();n      // Fill emailn      const emailSpan = document.getElementById('profileUserEmail');n      if (window.authManager.user?.email) emailSpan.textContent = window.authManager.user.email;n    });n  </script>n</head>n<body>n  <div class="container page">n    <header class="header" style="margin-bottom:16px;">n      <nav class="nav" style="gap:16px;">n        <div class="logo"><div class="logo-icon"><i class="fas fa-brain"></i></div><span>AI-MCP-Bio</span></div>n        <div class="nav-links">n          <a href="index.html">Home</a>n          <div style="flex:1"></div>n          <a href="admin.html" id="adminNav" style="display:none;">Admin</a>n          <span class="user-email" id="userEmail" title="Profile" style="cursor:default;"></span>n          <button class="btn btn-secondary" id="logoutBtn">Logout</button>n        </div>n      </nav>n    </header>nn    <main>n      <h2 style="color:white;margin:0 0 12px;">Profile</h2>n      <div class="card" style="padding:12px;">n        <div class="tabs" style="display:flex;gap:8px;margin-bottom:12px;border-bottom:1px solid rgba(255,255,255,0.15);">n          <button class="btn btn-secondary" id="tabBtnCredentials">Credentials</button>n          <button class="btn btn-secondary" id="tabBtnMCP">MCP Servers</button>n          <button class="btn btn-secondary" id="tabBtnClient">MCP Client (mcp.json)</button>n        </div>nn        <div id="tabCredentials" style="display:none;">n          <div style="display:flex;gap:16px;flex-wrap:wrap;">n            <div style="flex:1;min-width:280px;" class="card">n              <div style="padding:12px;">n                <h4 style="margin:4px 0 8px;color:white;">Change Password</h4>n                <div style="color:#cbd5e1;margin-bottom:8px;">User: <span id="profileUserEmail">-</span></div>n                <form id="changePasswordForm" style="display:flex;flex-direction:column;gap:8px;">n                  <div style="position:relative;"><input type="password" id="newPassword" placeholder="New password" required style="padding-right:36px;"><button type="button" id="toggleNewPassword" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;color:#e5e7eb;cursor:pointer;"><i class="fas fa-eye"></i></button></div>n                  <div style="position:relative;"><input type="password" id="confirmNewPassword" placeholder="Confirm new password" required style="padding-right:36px;"><button type="button" id="toggleConfirmPassword" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;color:#e5e7eb;cursor:pointer;"><i class="fas fa-eye"></i></button></div>n                  <button class="btn btn-primary" type="submit">Update Password</button>n                </form>n              </div>n            </div>n            <div style="flex:1;min-width:280px;" class="card">n              <div style="padding:12px;">n                <h4 style="text-align:center;margin:4px 0 8px;color:white;">Personal Access Tokens</h4>n                <div style="display:flex;gap:8px;margin-bottom:8px;"><input type="text" id="newTokenName" placeholder="Token name (optional)" style="flex:1;"><button class="btn btn-auth" id="generateTokenBtn">Generate</button></div>n                <small style="color:#cbd5e1;display:block;margin-bottom:8px;">Copy the token right after generation. It won't be shown again.</small>n                <div id="tokensList" style="max-height:180px;overflow:auto;border-top:1px solid rgba(255,255,255,0.15);"></div>n              </div>n            </div>n          </div>n        </div>nn        <div id="tabMCP" style="display:none;">n          <!-- Reuse existing MCP section from index.html -->n          <div style="border:1px solid rgba(255,255,255,0.15);border-radius:12px;padding:12px;background:#2a1f5f;">n            <div style="display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;">n              <h4 style="margin:4px 0 8px;color:white;">MCP Selection Profiles</h4>n              <div style="display:flex;gap:8px;align-items:center;">n                <select id="profilesDropdown" style="min-width:220px;"></select>n                <button class="btn btn-auth" id="loadProfileBtn">Load</button>n                <input type="text" id="profileName" placeholder="New profile name" style="margin-left:8px;">n                <button class="btn btn-auth" id="createProfileBtn">Create Profile</button>n              </div>n            </div>n            <small style="color:#cbd5e1;display:block;margin-bottom:8px;">You can have up to 10 profiles. Each profile can include up to 5 servers.</small>n            <div style="display:flex;gap:16px;align-items:stretch;">n              <div style="flex:1;min-width:240px;display:flex;flex-direction:column;">n                <h5 style="color:#e5e7eb;margin:6px 0;">Available MCP Servers</h5>n                <div id="availableServers" style="flex:1;border:1px solid rgba(255,255,255,0.15);border-radius:8px;padding:8px;max-height:260px;overflow:auto;"></div>n              </div>n              <div style="flex:0 0 110px;display:flex;flex-direction:column;gap:8px;justify-content:center;align-items:center;">n                <button class="btn btn-auth" id="addToCartBtn" title="Add to Cart">&gt;&gt;</button>n                <button class="btn btn-secondary" id="removeFromCartBtn" title="Remove from Cart">&lt;&lt;</button>n              </div>n              <div style="flex:1;min-width:240px;display:flex;flex-direction:column;">n                <div style="flex:1;border:1px solid rgba(255,255,255,0.15);border-radius:8px;padding:8px;max-height:260px;overflow:auto;"></div>n              </div>n              <div style="flex:0 0 110px;display:flex;flex-direction:column;gap:8px;justify-content:center;align-items:center;">n                <button class="btn btn-auth" id="moveToSelectedBtn" title="Move to Selected">&gt;&gt;</button>n                <button class="btn btn-secondary" id="removeSelectedBtn" title="Remove from Selected">&lt;&lt;</button>n              </div>n              <div style="flex:1;min-width:240px;display:flex;flex-direction:column;">n                <h5 style="color:#e5e7eb;margin:6px 0;">Selected MCP Servers</h5>n                <div id="selectedServers" style="flex:1;border:1px solid rgba(255,255,255,0.15);border-radius:8px;padding:8px;max-height:260px;overflow:auto;"></div>n                <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">n                  <button class="btn btn-primary" id="saveProfileBtn">Save</button>n                  <button class="btn btn-secondary" id="activateProfileBtn">Activate</button>n                  <button class="btn btn-secondary" id="deleteProfileBtn">Delete</button>n                </div>n              </div>n            </div>n          </div>n        </div>nn        <div id="tabClient" style="display:none;">n          <div style="border:1px solid rgba(255,255,255,0.15);border-radius:12px;padding:12px;background:#2a1f5f;">n            <h4 style="margin:4px 0 12px;color:white;">MCP Client Configuration (mcp.json)</h4>n            <p style="color:#cbd5e1;margin: 0 0 10px;">Select a profile, enter server URLs and paste your token. Then generate your <code>mcp.json</code>.</p>n            <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;">n              <div>n                <label style="display:block;color:#e5e7eb;margin-bottom:4px;">Profile</label>n                <select id="clientProfileDropdown" style="min-width:240px;"></select>n              </div>n              <div>n                <label style="label" style="display:block;color:#e5e7eb;margin-bottom:4px;">Token (paste manually)</label>n                <input id="clientTokenInput" type="text" placeholder="paste your token" style="min-width:260px;">n              </div>n              <button class="btn btn-auth" id="generateMcpJsonBtn">Generate JSON</button>n              <button class="btn btn-secondary" id="copyMcpJsonBtn">Copy</button>n            </div>n            <div id="clientServersConfig" style="margin-top:10px;padding:8px;border:1px solid rgba(255,255,255,0.15);border-radius:8px;"></div>n            <textarea id="mcpJsonOutput" style="width:100%;height:200px;margin-top:10px;border-radius:8px;background:#1f1443;color:#e5e7eb;padding:10px;border:1px solid rgba(255,255,255,0.2);" placeholder="Generated mcp.json will appear here..."></textarea>n            <small style="color:#cbd5e1;display:block;margin-top:6px;">Save this as <code>mcp.json</code> in your MCP client configuration directory.</small>n          </div>n        </div>n      </div>n    </main>n  </div>n</body>n</html>